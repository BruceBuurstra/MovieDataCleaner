<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="MovieDataCleaner">
<title>MovieDataCleaner â€¢ MovieDataCleaner</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="MovieDataCleaner">
<meta property="og:description" content="MovieDataCleaner">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">MovieDataCleaner</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/MovieDataCleanerVignette.html">MovieDataCleaner</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/BruceBuurstra/MovieDataCleaner/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>MovieDataCleaner</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/BruceBuurstra/MovieDataCleaner/blob/HEAD/vignettes/MovieDataCleanerVignette.Rmd" class="external-link"><code>vignettes/MovieDataCleanerVignette.Rmd</code></a></small>
      <div class="d-none name"><code>MovieDataCleanerVignette.Rmd</code></div>
    </div>

    
    
<p>MovieDataCleaner is a package used to clean datasets, especially ones
with large amounts of missing data. Missing data can often be an issue
in larger datasets and can be found in almost any area of interest, not
just movies, therefore dealing with missing data is a problem that one
is likely to encounter. This package is best suited for Movie datasets
from MovieLens but can be used on any dataset. This package is able to
impute missing values into a dataset using either kNN or NMF. If you
wish to cluster your final dataset this packages also has the capability
to do that using kmeans clustering.</p>
<div class="section level2">
<h2 id="load-package-and-dataset">Load package and dataset<a class="anchor" aria-label="anchor" href="#load-package-and-dataset"></a>
</h2>
<p>Here we load our package and dataset from MovieLens which contains
lots of missing values. We also remove the first column which is a
column for userIds.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/BruceBuurstra/MovieDataCleaner" class="external-link">MovieDataCleaner</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="st">"../data/ratings_wide.rdata"</span><span class="op">)</span></span>
<span><span class="va">ratings_wide</span> <span class="op">&lt;-</span> <span class="va">ratings_wide</span><span class="op">[</span>,<span class="op">-</span><span class="fl">1</span><span class="op">]</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="clean-initial-dataset">Clean initial dataset<a class="anchor" aria-label="anchor" href="#clean-initial-dataset"></a>
</h2>
<p>Two functions from our package <code>drop_rows</code> and
<code>drop_columns</code> can be used to remove rows and columns from a
dataset that contain extraordinary large amounts of missing data. This
can help make the imputation proccess less substantial.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/drop_columns.html">drop_columns</a></span><span class="op">(</span><span class="fl">0.9</span>, <span class="va">ratings_wide</span><span class="op">)</span></span>
<span><span class="va">new_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/drop_rows.html">drop_rows</a></span><span class="op">(</span><span class="fl">0.7</span>, <span class="va">new_data</span><span class="op">)</span></span></code></pre></div>
<p>Above we create a new dataset <code>new_data</code> which we will
work with from now on out. This new dataset still contains lots of
missing values but not as much as our original data. Columns that
contained over 90% of missing values were dropped and rows that
contained over 70% of missing values were dropped. Now we have a datset
ready to have values imputed for missing data.</p>
</div>
<div class="section level2">
<h2 id="knn-imputation">kNN Imputation<a class="anchor" aria-label="anchor" href="#knn-imputation"></a>
</h2>
<p>First we will use the <code>run_knn_imputation</code> function on our
new dataset.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">knn_imputed</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_knn_imputation.html">run_knn_imputation</a></span><span class="op">(</span><span class="fl">5</span>, <span class="va">new_data</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">knn_imputed</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;       1   2        6  10       11</span></span>
<span><span class="co">#&gt; 18 3.50 3.0 4.000000 3.5 3.583333</span></span>
<span><span class="co">#&gt; 19 4.00 3.0 3.250000 2.0 3.500000</span></span>
<span><span class="co">#&gt; 21 3.50 3.5 3.400000 5.0 3.500000</span></span>
<span><span class="co">#&gt; 28 3.80 3.5 3.500000 3.0 3.000000</span></span>
<span><span class="co">#&gt; 41 4.25 3.0 3.642857 3.5 3.625000</span></span></code></pre></div>
<p>Imputation is done using the value of 5 for the k in our nearest
neighbor imputation function. Looking at the first 5 rows and columns we
see now that our dataset has values where there used to be missing
values.</p>
</div>
<div class="section level2">
<h2 id="clustering-with-knn-imputed-dataset">Clustering with knn imputed dataset<a class="anchor" aria-label="anchor" href="#clustering-with-knn-imputed-dataset"></a>
</h2>
<p>Now that we have a full dataset we can cluster that dataset to see
what movies are alike. The clustering functions in this package look
only at clustering on columns. <code>optimal_knn_kmeans_clusters</code>
takes a knn imputed dataset to determine the optimal number of
clusters.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/optimal_knn_kmeans_clusters.html">optimal_knn_kmeans_clusters</a></span><span class="op">(</span><span class="va">knn_imputed</span><span class="op">)</span></span></code></pre></div>
<p><img src="MovieDataCleanerVignette_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<p>Here we see that when looking at the average silhouette width the
optimal number of clusters is 2. Next
<code>get_knn_kmeans_elbow_plot</code> returns an elbow plot for the
optimal number of clusters.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_knn_kmeans_elbow_plot.html">get_knn_kmeans_elbow_plot</a></span><span class="op">(</span><span class="va">knn_imputed</span><span class="op">)</span></span></code></pre></div>
<p><img src="MovieDataCleanerVignette_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>Looking at the elbow plot we again see that 2 is a solid choice for
the amount of clusters to look at with this dataset. Now we will use
<code>run_knn_movies_clustering</code> to cluster our data into 2
clusters using kmeans.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/run_knn_movies_clustering.html">run_knn_movies_clustering</a></span><span class="op">(</span><span class="fl">2</span>, <span class="va">knn_imputed</span><span class="op">)</span></span></code></pre></div>
<p><img src="MovieDataCleanerVignette_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>Using this value of 2 we are able to get a visualization of our data
separated into clusters. Now we run <code>get_knn_clustered_data</code>
which takes two arguments. The first is the original data to get our
original column names, since in our case this data had movieIds as
column names. We lost our specific column names when we imputed values.
The second is the knn imputed dataset which will be clustered on.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">knn_clustered_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_knn_clustered_data.html">get_knn_clustered_data</a></span><span class="op">(</span><span class="va">new_data</span>, <span class="va">knn_imputed</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">knn_clustered_data</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   movieId Cluster                          title</span></span>
<span><span class="co">#&gt; 1       1       2               Toy Story (1995)</span></span>
<span><span class="co">#&gt; 2       2       1                 Jumanji (1995)</span></span>
<span><span class="co">#&gt; 3       6       2                    Heat (1995)</span></span>
<span><span class="co">#&gt; 4      10       1               GoldenEye (1995)</span></span>
<span><span class="co">#&gt; 5      11       2 American President, The (1995)</span></span></code></pre></div>
<p>Here our final dataset now allows us to see how movies were separated
into clusters.</p>
</div>
<div class="section level2">
<h2 id="nmf-imputation">NMF Imputation<a class="anchor" aria-label="anchor" href="#nmf-imputation"></a>
</h2>
<p>First we will use the <code>run_nmf_imputation</code> function on our
new dataset.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nmf_imputed</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_nmf_imputation.html">run_nmf_imputation</a></span><span class="op">(</span><span class="fl">3</span>, <span class="va">new_data</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">nmf_imputed</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;             1        2        6       10       11</span></span>
<span><span class="co">#&gt; [1,] 3.964327 3.301046 3.979432 3.535942 3.497563</span></span>
<span><span class="co">#&gt; [2,] 3.555535 2.956230 3.376583 2.874200 2.810149</span></span>
<span><span class="co">#&gt; [3,] 3.837982 3.572990 3.502947 3.286207 4.056003</span></span>
<span><span class="co">#&gt; [4,] 2.894560 2.342503 3.327496 3.152028 3.015873</span></span>
<span><span class="co">#&gt; [5,] 3.994328 3.550856 2.914950 2.134487 2.485927</span></span></code></pre></div>
<p>Imputation is done using a rank 3 NMF and multiplying out the wdh
matrices. Looking at the first 5 rows and columns we see now that our
dataset has values where there used to be missing values.</p>
</div>
<div class="section level2">
<h2 id="clustering-with-nmf-imputed-dataset">Clustering with NMF imputed dataset<a class="anchor" aria-label="anchor" href="#clustering-with-nmf-imputed-dataset"></a>
</h2>
<p>Now that we have a full dataset we again can cluster that dataset to
see what movies are alike. <code>optimal_nmf_kmeans_clusters</code>
takes a nmf, here we use the one returned from running NMF imputation
above, to determine the optimal number of clusters.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/optimal_nmf_kmeans_clusters.html">optimal_nmf_kmeans_clusters</a></span><span class="op">(</span><span class="va">nmf</span><span class="op">)</span></span></code></pre></div>
<p><img src="MovieDataCleanerVignette_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>Here we see that when looking at the average silhouette width the
optimal number of clusters is 2 once again. Next
<code>get_nmf_kmeans_elbow_plot</code> returns an elbow plot for the
optimal number of clusters, taking in a NMF as an argument.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_nmf_kmeans_elbow_plot.html">get_nmf_kmeans_elbow_plot</a></span><span class="op">(</span><span class="va">nmf</span><span class="op">)</span></span></code></pre></div>
<p><img src="MovieDataCleanerVignette_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<p>Looking at the elbow plot we again see that 2 is a solid choice for
the amount of clusters to look at with this dataset. Then we use
<code>run_nmf_movies_clustering</code> to cluster our NMF into 2
clusters using kmeans.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/run_nmf_movies_clustering.html">run_nmf_movies_clustering</a></span><span class="op">(</span><span class="fl">2</span>, <span class="va">nmf</span><span class="op">)</span></span></code></pre></div>
<p><img src="MovieDataCleanerVignette_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
<p>Using this value of 2 we are able to get a visualization of our data
separated into clusters. Next we run <code>get_nmf_clustered_data</code>
which takes two arguments. The first is the NMF to get our original
column names, since in our case this data had movieIds as column names.
We lost our specific column names when we imputed values. The second is
our kmean returned from running NMF clustering above.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nmf_clustered_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_nmf_clustered_data.html">get_nmf_clustered_data</a></span><span class="op">(</span><span class="va">nmf</span>, <span class="va">kmean</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">nmf_clustered_data</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   movieId Cluster                          title</span></span>
<span><span class="co">#&gt; 1       1       1               Toy Story (1995)</span></span>
<span><span class="co">#&gt; 2       2       1                 Jumanji (1995)</span></span>
<span><span class="co">#&gt; 3       6       2                    Heat (1995)</span></span>
<span><span class="co">#&gt; 4      10       2               GoldenEye (1995)</span></span>
<span><span class="co">#&gt; 5      11       1 American President, The (1995)</span></span></code></pre></div>
<p>Here we once again have a final dataset that allows us to see how
movies were separated into clusters.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Bruce Buurstra, Madan K C, Rashmita Vagu, Durga saranya tummalapalli.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
